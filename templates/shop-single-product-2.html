{% extends 'base.html' %}
{% load static %}

{% block content %}
<main class="main-content site-wrapper-reveal">

  <!-- Page Title -->
  <section class="page-title-area" data-bg-img="{% static 'assets/img/photos/bg-page-title.webp' %}">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="page-title-content text-center">
            <h2 class="title text-white">{{ product.name }}</h2>
            <div class="bread-crumbs">
              <a href="{% url 'home' %}">Home<span class="breadcrumb-sep">/</span></a>
              <span class="active">{{ product.name }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Product Area -->
  <section class="shop-area shop-single-product">
    <div class="container pb-md-50 pb-95 pt-50">
      <div class="row">

        <!-- Product Images -->
        <div class="col-lg-6">
          <div class="single-product-gallery">
            <!-- Main image -->
            <div class="main-image mb-3">
              {% if product.image %}
              <a href="{{ product.image.url }}" data-fancybox="gallery">
                <img id="mainProductImage" src="{{ product.image.url }}" alt="{{ product.name }}">
              </a>
              {% else %}
              <img id="mainProductImage" src="{% static 'assets/img/shop/details/default.jpg' %}" alt="No Image">
              {% endif %}
            </div>

            <!-- Thumbnails -->
            <div class="thumbnail-images d-flex gap-2">
              {% for img in images %}
              <div class="thumb-item">
                <img src="{{ img.image.url }}" alt="{{ product.name }}" class="thumb-img" onclick="changeMainImage('{{ img.image.url }}')">
              </div>
              {% empty %}
              <div class="thumb-item">
                <img src="{% static 'assets/img/shop/details/default.jpg' %}" alt="No Image">
              </div>
              {% endfor %}
            </div>
          </div>
        </div>

        <!-- Product Info -->
        <div class="col-lg-6">
          <div class="single-product-info mt-md-30 mt-20">
            <h4 class="title">{{ product.name }}</h4>
            <div class="prices">
              <span class="price">{{ product.price }} so'm</span>
            </div>
            <div class="product-number">
              SKU: <span>{{ product.quantity }}</span>
            </div>
            <p class="product-desc">{{ product.desc }}</p>
            <div class="quick-product-action">
              <div class="action-top">
                <div class="pro-qty">
                  <input type="text" id="quantity" title="Quantity" value="1" />
                </div>
                <button class="btn btn-black"><i class="fa fa-opencart"></i> Add to cart</button>
              </div>
              <div class="action-bottom">
                <a class="btn-theme" href="{% url 'products' %}">Buy it now</a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>
</main>

<!-- Скрипт для смены главного изображения -->
<script>
function changeMainImage(url) {
  document.getElementById('mainProductImage').src = url;
}
</script>

{% endblock content %}
